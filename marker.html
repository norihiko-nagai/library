<!DOCTYPE html>
<html lang="ja">
<head>
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>マーカーアニメーション</title>

<script>
    window.addEventListener('scroll',function() {
      const height = window.innerHeight;                    //画面の高さを取得
      const scroll = this.pageYOffset;                      //スクロール量
      const marker = document.querySelectorAll('.marker');  //マーカーを引く要素を取得
      const value = scroll - height + 300                   //後ろの数字を弄ることで、イベント位置をずらす
    
      // markerクラスを持っている要素全てに処理を行う
        marker.forEach(function(element){
          //要素が画面内の指定の位置に来たら「on」クラスをつける
            if (scroll > element.getBoundingClientRect().top + value) {
                element.classList.add('on')
            }
        });
})
</script>

<style>
.marker {
    background:linear-gradient(transparent 50%, rgba(255, 220, 123) 50%);
    display: inline;

  /* 背景の繰り返しを停止 */
    background-repeat: no-repeat;

  /* マーカーの横方向を0にして縮める */
    background-size: 0% 100%;

  /* マーカーが引かれる速度を指定 */
    transition:background-size 1.5s;
}

/* マーカーが引かれる際に付与するクラス */
.marker.on {
  /* 横方向を100%にして、マーカーを引く */
    background-size: 100% 100%;
}
</style>


</head>
<body>
    <div class="container" style="padding: 3000px 0;">
        <p>マーカーを引くスクリプトです。<span class="marker">ここにマーカーを引いてアニメーション</span>で動かします。</p>
    </div>
</body>
</html>